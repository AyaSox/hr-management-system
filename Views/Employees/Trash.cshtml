@model IEnumerable<HRManagementSystem.Models.Employee>
@{
    ViewData["Title"] = "Recycle Bin";
}

<h1><i class="fas fa-recycle"></i> Recycle Bin</h1>
<p class="text-muted">Soft-deleted employees. You can restore or permanently delete.</p>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>Deleted Employees</span>
        <a asp-action="Index" class="btn btn-sm btn-secondary">Back to List</a>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped align-middle">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Department</th>
                        <th>Date Hired</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var e in Model)
                {
                    <tr>
                        <td>@e.EmployeeId</td>
                        <td>@e.FullName</td>
                        <td>@e.Email</td>
                        <td>@e.Department?.Name</td>
                        <td>@e.DateHired.ToShortDateString()</td>
                        <td>
                            <form asp-action="Restore" method="post" class="d-inline">
                                <input type="hidden" name="id" value="@e.EmployeeId" />
                                <button type="submit" class="btn btn-sm btn-success" aria-label="Restore @e.FullName"><i class="fas fa-undo"></i> Restore</button>
                            </form>
                            <form asp-action="Purge" method="post" class="d-inline" onsubmit="return confirm('Permanently delete @e.FullName? This cannot be undone.');">
                                <input type="hidden" name="id" value="@e.EmployeeId" />
                                <button type="submit" class="btn btn-sm btn-danger" aria-label="Permanently delete @e.FullName"><i class="fas fa-trash"></i> Purge</button>
                            </form>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
            @if (!Model.Any())
            {
                <div class="text-center text-muted">Recycle bin is empty.</div>
            }
        </div>
    </div>
</div>
