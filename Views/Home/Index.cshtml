@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center mb-5">
    <h1 class="display-4">Welcome to HR Management System</h1>
    <p class="lead">Comprehensive employee and department management solution</p>
</div>

<!-- Global Search Bar -->
@if (User.Identity!.IsAuthenticated)
{
    <div class="row justify-content-center mb-5">
        <div class="col-md-8">
            <div class="card shadow-sm search-card">
                <div class="card-body p-3">
                    <div class="input-group">
                        <span class="input-group-text bg-transparent border-0">
                            <i class="fas fa-search text-muted"></i>
                        </span>
                        <input type="text" class="form-control border-0 global-search" placeholder="Quick search: employees, departments, reports..." id="globalSearch">
                        <button class="btn btn-outline-primary border-0" type="button" onclick="performGlobalSearch()">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (User.Identity!.IsAuthenticated)
{
    <div class="row mb-4 text-center">
        <div class="col-md-3 mb-3">
            <div class="card p-3 shadow-sm h-100">
                <div class="h6">Total Employees</div>
                <div class="display-6 text-primary">@ViewBag.TotalEmployees</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card p-3 shadow-sm h-100">
                <div class="h6">Active Employees</div>
                <div class="display-6 text-success">@ViewBag.ActiveEmployees</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card p-3 shadow-sm h-100">
                <div class="h6">On Leave</div>
                <div class="display-6 text-warning">@ViewBag.OnLeaveEmployees</div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card p-3 shadow-sm h-100">
                <div class="h6">Average Salary</div>
                <div class="display-6 text-info">@ViewBag.AvgSalary</div>
            </div>
        </div>
    </div>
}

<div class="row text-center mt-5 mb-4">
    <div class="col-md-4">
        <div class="card p-4 shadow-sm h-100 hover-card">
            <div class="card-body">
                <i class="fas fa-users fa-3x text-primary mb-3"></i>
                <h4>Employees</h4>
                <p>Manage employee records, profiles, and information with advanced search, status tracking, and bulk operations</p>
                <a asp-controller="Employees" asp-action="Index" class="btn btn-primary btn-modern" style="color: black !important;">View Employees</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-4 shadow-sm h-100 hover-card">
            <div class="card-body">
                <i class="fas fa-building fa-3x text-success mb-3"></i>
                <h4>Departments</h4>
                <p>Organize and manage company departments with employee assignments and analytics</p>
                <a asp-controller="Departments" asp-action="Index" class="btn btn-success btn-modern" style="color: black !important;">View Departments</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card p-4 shadow-sm h-100 hover-card">
            <div class="card-body">
                <i class="fas fa-tachometer-alt fa-3x text-info mb-3"></i>
                <h4>Dashboard</h4>
                <p>View analytics, reports, recent hires, birthday notifications, and business intelligence</p>
                <a asp-controller="Dashboard" asp-action="Index" class="btn btn-info btn-modern">View Dashboard</a>
            </div>
        </div>
    </div>
</div>

@if (!User.Identity!.IsAuthenticated)
{
    <div class="text-center mt-5 p-4 bg-light rounded">
        <h4>Ready to Get Started?</h4>
        <p class="mb-3">Please <a asp-controller="Account" asp-action="Login" class="btn btn-primary">Login</a> to access the system features.</p>
        <div class="alert alert-info">
            <strong><i class="fas fa-key"></i> Demo Account:</strong> 
            <code>admin@hrsystem.com</code> / <code>Admin@123</code>
        </div>
    </div>
}
else
{
    <div class="text-center mt-4 p-4 bg-success text-white rounded-modern welcome-section">
        <h4><i class="fas fa-check-circle"></i> Welcome back, 👋 @(User.IsInRole("Admin") ? "Admin" : "HR Manager")!</h4>
        <p class="mb-3">You're logged in and ready to manage your HR system.</p>
        <div class="btn-group">
            <a asp-controller="Dashboard" asp-action="Index" class="btn btn-light btn-modern">
                <i class="fas fa-chart-dashboard"></i> Go to Dashboard
            </a>
            <a asp-controller="Employees" asp-action="Index" class="btn btn-outline-light btn-modern">
                <i class="fas fa-users"></i> Manage Employees
            </a>
        </div>
    </div>
}

<style>
    .fas, .fab {
        font-family: "Font Awesome 5 Free";
        font-weight: 900;
    }
    .fab {
        font-family: "Font Awesome 5 Brands";
        font-weight: 400;
    }
    
    /* Modern Card Styling */
    .card {
        border: none;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        border-radius: 1rem;
        transition: all 0.3s ease;
    }
    
    .hover-card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        transform: translateY(-5px);
    }
    
    /* Modern Button Styling */
    .btn-modern {
        border-radius: 50px;
        padding: 0.75rem 2rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .btn-modern:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .btn-primary.btn-modern:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }
    
    .btn-success.btn-modern:hover {
        background-color: #157347;
        border-color: #157347;
    }
    
    .btn-info.btn-modern:hover {
        background-color: #0dcaf0;
        border-color: #0dcaf0;
    }
    
    /* Welcome Section */
    .welcome-section {
        border-radius: 1rem;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
        margin-top: 2rem !important;
    }
    
    .rounded-modern {
        border-radius: 1rem !important;
    }
    
    /* Global Search Styling */
    .search-card {
        border-radius: 50px;
        border: 2px solid #e9ecef;
        transition: all 0.3s ease;
    }
    
    .search-card:hover {
        border-color: #007bff;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.1);
    }
    
    .global-search {
        background: transparent;
        font-size: 1.1rem;
    }
    
    .global-search:focus {
        box-shadow: none;
        background: transparent;
    }
    
    .global-search::placeholder {
        color: #6c757d;
        font-style: italic;
    }
    
    /* Enhanced spacing */
    .mb-5 {
        margin-bottom: 3rem !important;
    }
    
    /* Login section styling */
    .bg-light.rounded {
        border-radius: 1rem !important;
        box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1);
    }
</style>

<script>
function performGlobalSearch() {
    const searchTerm = document.getElementById('globalSearch').value.trim().toLowerCase();
    
    if (!searchTerm) {
        alert('Please enter a search term');
        return;
    }
    
    // Smart search routing
    if (searchTerm.includes('employee') || searchTerm.includes('staff') || searchTerm.includes('worker')) {
        window.location.href = '@Url.Action("Index", "Employees")';
    } else if (searchTerm.includes('department') || searchTerm.includes('dept') || searchTerm.includes('division')) {
        window.location.href = '@Url.Action("Index", "Departments")';
    } else if (searchTerm.includes('dashboard') || searchTerm.includes('report') || searchTerm.includes('analytics')) {
        window.location.href = '@Url.Action("Index", "Dashboard")';
    } else if (searchTerm.includes('audit') || searchTerm.includes('log') || searchTerm.includes('history')) {
        window.location.href = '@Url.Action("Index", "Audit")';
    } else {
        // Default to employee search with the term
        window.location.href = '@Url.Action("Index", "Employees")?searchString=' + encodeURIComponent(searchTerm);
    }
}

// Enable search on Enter key
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('globalSearch');
    if (searchInput) {
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performGlobalSearch();
            }
        });
    }
});
</script>
